<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  <title>Architecture | Theseus Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="This post will describe how theseus works, it’s useful for developers and who want to contribute. Table of Contents Theseus Topological Graph The Proxy The Auth The Api The Portal    Theseus Topologic">
<meta name="keywords">
<meta property="og:type" content="article">
<meta property="og:title" content="Architecture">
<meta property="og:url" content="http://blog.theseus.online/2017/04/27/architecture/index.html">
<meta property="og:site_name" content="Theseus Blog">
<meta property="og:description" content="This post will describe how theseus works, it’s useful for developers and who want to contribute. Table of Contents Theseus Topological Graph The Proxy The Auth The Api The Portal    Theseus Topologic">
<meta property="og:image" content="http://blog.theseus.online/images/theseus-general-architecture.png">
<meta property="og:updated_time" content="2017-06-17T10:52:14.316Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Architecture">
<meta name="twitter:description" content="This post will describe how theseus works, it’s useful for developers and who want to contribute. Table of Contents Theseus Topological Graph The Proxy The Auth The Api The Portal    Theseus Topologic">
<meta name="twitter:image" content="http://blog.theseus.online/images/theseus-general-architecture.png">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/typing.css">
</head>

  
    
      <body>
    
  
      <div id="container" class="container">
        <article id="post-architecture" class="article article-type-post" itemscope itemprop="blogPost">
  <header id="header" class="header">
  <nav id="main-nav" class="main-nav">
    
      <a class="main-nav-link" href="/">Home</a>
    
      <a class="main-nav-link" href="/archives">Archives</a>
    
      <a class="main-nav-link" href="https://theseus.online/#/about">About</a>
    
  </nav>
  <nav id="sub-nav">
    
  </nav>
</header>

  <hr/>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Architecture
    </h1>
  

      </header>
    
    <div class="article-entry typo" itemprop="articleBody">
      
        <p>This post will describe how theseus works, it’s useful for developers and who want to contribute.</p>
<h3 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h3><ul>
<li><a href="#Theseus-Topological-Graph">Theseus Topological Graph</a><ul>
<li><a href="#The-Proxy">The Proxy</a></li>
<li><a href="#The-Auth">The Auth</a></li>
<li><a href="#The-Api">The Api</a></li>
<li><a href="#The-Portal">The Portal</a></li>
</ul>
</li>
</ul>
<h3 id="Theseus-Topological-Graph"><a href="#Theseus-Topological-Graph" class="headerlink" title="Theseus Topological Graph"></a>Theseus Topological Graph</h3><p><img src="/images/theseus-general-architecture.png" alt="general architecture">  </p>
<h4 id="The-Proxy"><a href="#The-Proxy" class="headerlink" title="The Proxy"></a>The Proxy</h4><p>The proxy is a reverse proxy, it has two missions:</p>
<ul>
<li>The proxy is a reverse proxy, which has two missions.</li>
<li>check if a request has validated cookie(signature) if its target backend is <code>api</code>.</li>
</ul>
<h4 id="The-Auth"><a href="#The-Auth" class="headerlink" title="The Auth"></a>The Auth</h4><p>The auth module’s work is simple:</p>
<ul>
<li>when a user request for login, it redirect the user to Github Oauth page.</li>
<li>when GitHub redirect the user back to callback URL, it requests GitHub for user information, then it set a cookie with user information and signature it. Besides， it should update user information to the database(aka Postgres).</li>
<li>when a user request for log out, it erases cookie.</li>
</ul>
<h4 id="The-Api"><a href="#The-Api" class="headerlink" title="The Api"></a>The Api</h4><p>The API’s work contains two aspects:</p>
<ul>
<li>Map user request to k8s format, and proxy it to k8s api.</li>
<li>Manage persistent volumes.</li>
</ul>
<h4 id="The-Portal"><a href="#The-Portal" class="headerlink" title="The Portal"></a>The Portal</h4><p>The portal is the user interface, served as static files(HTML, JS, CSS etc.).</p>

      
    </div>
    <footer class="article-footer">
      <ul class="article-meta">
        <li>
          <span class="label">Published Date:</span>
          <a href="/2017/04/27/architecture/" class="article-date">
  <time datetime="2017-04-26T16:00:00.000Z" itemprop="datePublished">2017-04-27</time>
</a>

        </li>
        
        
        <hr/>
      </ul>
    </footer>
  </div>
  
    
<nav id="article-nav" class="article-nav">
  
    <a href="/2017/04/21/getting-start/" id="article-nav-newer" class="article-nav-link-wrap newer">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Getting Start
        
      </div>
    </a>
  
  
    <a href="/2017/05/10/original-intention/" id="article-nav-older" class="article-nav-link-wrap older">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Original Intention</div>
    </a>
  
</nav>


  
</article>




      </div>
      
    <footer id="footer" class="post-footer footer">
      <hr/>
      <div id="footerContent" class="footer-content">
        

      </div>
    </footer>

      

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/typing.js"></script>
<!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->







    </div>
  </body>
</html>
